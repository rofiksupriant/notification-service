spring:
  application:
    name: ${NOTIF_APP_NAME:notification-service}
  
  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        show_sql: false
    show-sql: false
  
  datasource:
    # Testcontainers will override these via @DynamicPropertySource
    url: ${NOTIF_TEST_DB_URL:jdbc:postgresql://localhost:5432/testdb}
    driver-class-name: ${NOTIF_TEST_DB_DRIVER:org.postgresql.Driver}
    username: ${NOTIF_TEST_DB_USERNAME:postgres}
    password: ${NOTIF_TEST_DB_PASSWORD:postgres}
    hikari:
      maximum-pool-size: ${NOTIF_TEST_DB_HIKARI_MAX_POOL_SIZE:10}
  
  mail:
    host: ${NOTIF_MAIL_HOST:smtp.gmail.com}
    port: ${NOTIF_MAIL_PORT:587}
    username: ${NOTIF_MAIL_USERNAME:test@example.com}
    password: ${NOTIF_MAIL_PASSWORD:test-password}
    properties:
      mail.smtp.auth: ${NOTIF_MAIL_SMTP_AUTH:true}
      mail.smtp.starttls.enable: ${NOTIF_MAIL_SMTP_STARTTLS_ENABLE:true}
      mail.smtp.starttls.required: ${NOTIF_MAIL_SMTP_STARTTLS_REQUIRED:true}
      mail.smtp.connectiontimeout: ${NOTIF_MAIL_SMTP_CONNECTION_TIMEOUT:5000}
      mail.smtp.timeout: ${NOTIF_MAIL_SMTP_TIMEOUT:10000}
      mail.smtp.writetimeout: ${NOTIF_MAIL_SMTP_WRITE_TIMEOUT:10000}

  task:
    execution:
      pool:
        core-size: ${NOTIF_TASK_EXECUTION_CORE_SIZE:2}
        max-size: ${NOTIF_TASK_EXECUTION_MAX_SIZE:2}

  flyway:
    enabled: ${NOTIF_FLYWAY_ENABLED:false}

app:
  feature:
    rabbitmq:
      enabled: ${NOTIF_RABBITMQ_ENABLED:true}

api:
  key:
    secret: test-api-key

watzap:
  api-key: ${NOTIF_WATZAP_API_KEY:test-api-key}
  number-key: ${NOTIF_WATZAP_NUMBER_KEY:test-number-key}
  base-url: ${NOTIF_WATZAP_BASE_URL:https://api.watzap.id/v1}
  timeout:
    connect-ms: ${NOTIF_WATZAP_TIMEOUT_CONNECT_MS:5000}
    read-ms: ${NOTIF_WATZAP_TIMEOUT_READ_MS:10000}

logging:
  level:
    root: ${NOTIF_LOGGING_LEVEL_ROOT:INFO}
    com.vibe.notification: ${NOTIF_LOGGING_LEVEL_APP:DEBUG}